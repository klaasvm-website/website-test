<!DOCTYPE html>
<html>
<head>
    <title>Galactic Warp - QWERTY/AZERTY</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #000;
            font-family: 'Arial', sans-serif;
        }

        #gameContainer {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(circle at center, #001144, #000000);
        }

        #backgroundText {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: rgba(255, 255, 255, 0.1);
            font-size: 5vw;
            font-weight: bold;
            text-align: center;
            z-index: 0;
            pointer-events: none;
        }

        #player {
            position: absolute;
            width: 40px;
            height: 40px;
            background: #00f;
            clip-path: polygon(50% 0%, 100% 100%, 0% 100%);
            transform: translate(-50%, -50%);
            transition: all 0.1s;
            z-index: 2;
        }

        .bullet {
            position: absolute;
            width: 6px;
            height: 15px;
            background: #ff0;
            border-radius: 2px;
            z-index: 1;
        }

        .enemy {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #f00;
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
            z-index: 1;
        }

        .powerup {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #0f0;
            border-radius: 50%;
            animation: pulse 1s infinite;
            z-index: 1;
        }

        .boss {
            position: absolute;
            width: 100px;
            height: 100px;
            background: #800080;
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
            z-index: 1;
            transition: transform 0.1s;
        }

        .boss-health-bar {
            position: absolute;
            width: 100px;
            height: 5px;
            background: #f00;
            top: -10px;
            left: 0;
        }

        .boss-health {
            height: 100%;
            background: #0f0;
        }

        #hud {
            position: fixed;
            top: 10px;
            left: 10px;
            color: #fff;
            font-size: 20px;
            text-shadow: 2px 2px 2px #000;
            z-index: 3;
        }

        #controls {
            position: fixed;
            top: 10px;
            right: 10px;
            color: #fff;
            font-size: 16px;
            text-shadow: 2px 2px 2px #000;
            z-index: 3;
        }

        #controls button {
            background: #444;
            color: #fff;
            border: none;
            padding: 5px 10px;
            margin: 2px;
            cursor: pointer;
            border-radius: 3px;
        }

        #controls button.active {
            background: #00f;
        }

        #muteButton {
            position: fixed;
            bottom: 10px;
            right: 10px;
            background: #444;
            color: #fff;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 3px;
            z-index: 3;
        }

        #muteButton::before {
            content: 'ðŸ”Š';
            font-size: 20px;
        }

        #muteButton.muted::before {
            content: 'ðŸ”‡';
        }

        .explosion {
            position: absolute;
            width: 40px;
            height: 40px;
            background: radial-gradient(circle, #ff6600 10%, #ff2200 90%);
            border-radius: 50%;
            animation: explode 0.5s forwards;
            z-index: 1;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        @keyframes explode {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(3); opacity: 0; }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div id="backgroundText">this is a testing page</div>
        <div id="player"></div>
        <div id="hud">Score: <span id="score">0</span></div>
        <div id="controls">
            <button id="qwertyBtn" class="active">QWERTY (WASD)</button>
            <button id="azertyBtn">AZERTY (ZQSD)</button>
        </div>
        <button id="muteButton"></button>
    </div>

    <script>
        const player = document.getElementById('player');
        const gameContainer = document.getElementById('gameContainer');
        const scoreElement = document.getElementById('score');
        const qwertyBtn = document.getElementById('qwertyBtn');
        const azertyBtn = document.getElementById('azertyBtn');
        const muteButton = document.getElementById('muteButton');
        let score = 0;
        let playerX = window.innerWidth / 2;
        let playerY = window.innerHeight - 60;
        let isGameActive = true;
        let fireRate = 200;
        let canShoot = true;
        let powerUpActive = false;
        let controlScheme = 'qwerty'; // Default control scheme
        let isMuted = false; // Sound muted state
        let lastBossSpawnScore = 0; // Track the score at which the last boss was spawned

        // Initialize player position
        player.style.left = playerX + 'px';
        player.style.top = playerY + 'px';

        // Game states
        const keys = {
            ArrowLeft: false,
            ArrowRight: false,
            Space: false,
            KeyW: false,
            KeyA: false,
            KeyS: false,
            KeyD: false,
            KeyZ: false,
            KeyQ: false
        };

        // Event listeners for controls
        qwertyBtn.addEventListener('click', () => {
            controlScheme = 'qwerty';
            qwertyBtn.classList.add('active');
            azertyBtn.classList.remove('active');
        });

        azertyBtn.addEventListener('click', () => {
            controlScheme = 'azerty';
            azertyBtn.classList.add('active');
            qwertyBtn.classList.remove('active');
        });

        // Event listeners for keydown and keyup
        window.addEventListener('keydown', (e) => {
            if (keys.hasOwnProperty(e.code)) {
                keys[e.code] = true;
                e.preventDefault();
            }
        });

        window.addEventListener('keyup', (e) => {
            if (keys.hasOwnProperty(e.code)) {
                keys[e.code] = false;
                e.preventDefault();
            }
        });

        // Event listener for mute button
        muteButton.addEventListener('click', () => {
            isMuted = !isMuted;
            muteButton.classList.toggle('muted', isMuted);
        });

        // Game loop
        function update() {
            if (!isGameActive) return;

            // Player movement based on control scheme
            if (controlScheme === 'qwerty') {
                if (keys.KeyA && playerX > 30) playerX -= 5; // QWERTY: A = left
                if (keys.KeyD && playerX < window.innerWidth - 30) playerX += 5; // QWERTY: D = right
            } else if (controlScheme === 'azerty') {
                if (keys.KeyQ && playerX > 30) playerX -= 5; // AZERTY: Q = left
                if (keys.KeyD && playerX < window.innerWidth - 30) playerX += 5; // AZERTY: D = right
            }

            player.style.left = playerX + 'px';
            player.style.transform = `translate(-50%, -50%) rotate(${(keys.KeyA || keys.KeyQ ? 15 : keys.KeyD ? -15 : 0)}deg)`;

            // Shooting
            if (keys.Space && canShoot) {
                shoot();
                canShoot = false;
                setTimeout(() => canShoot = true, fireRate);
            }

            // Spawn enemies
            if (Math.random() < 0.03) spawnEnemy();
            
            // Spawn power-ups
            if (Math.random() < 0.005) spawnPowerUp();

            // Check for boss spawn
            if (score >= lastBossSpawnScore + 2000) {
                spawnBoss();
                lastBossSpawnScore = score; // Update the last boss spawn score
            }

            requestAnimationFrame(update);
        }

        function shoot() {
            const bullet = document.createElement('div');
            bullet.className = 'bullet';
            bullet.style.left = playerX + 'px';
            bullet.style.top = playerY - 20 + 'px';
            gameContainer.appendChild(bullet);

            // Bullet movement
            const bulletInterval = setInterval(() => {
                const currentTop = parseFloat(bullet.style.top);
                if (currentTop < -20) {
                    bullet.remove();
                    clearInterval(bulletInterval);
                } else {
                    bullet.style.top = (currentTop - 10) + 'px';
                    checkBulletCollision(bullet);
                }
            }, 16);
        }

        function spawnEnemy() {
            const enemy = document.createElement('div');
            enemy.className = 'enemy';
            enemy.style.left = Math.random() * (window.innerWidth - 30) + 'px';
            enemy.style.top = '-30px';
            gameContainer.appendChild(enemy);

            // Enemy movement
            const enemyInterval = setInterval(() => {
                if (!isGameActive) {
                    clearInterval(enemyInterval);
                    return;
                }

                const currentTop = parseFloat(enemy.style.top);
                if (currentTop > window.innerHeight + 30) {
                    enemy.remove();
                    clearInterval(enemyInterval);
                } else {
                    enemy.style.top = (currentTop + 3) + 'px';
                    checkEnemyCollision(enemy);
                }
            }, 16);
        }

        function spawnPowerUp() {
            const powerup = document.createElement('div');
            powerup.className = 'powerup';
            powerup.style.left = Math.random() * (window.innerWidth - 20) + 'px';
            powerup.style.top = '-20px';
            gameContainer.appendChild(powerup);

            // Power-up movement
            const powerupInterval = setInterval(() => {
                const currentTop = parseFloat(powerup.style.top);
                if (!isGameActive) {
                    clearInterval(powerupInterval);
                    return;
                }

                if (currentTop > window.innerHeight + 20) {
                    powerup.remove();
                    clearInterval(powerupInterval);
                } else {
                    powerup.style.top = (currentTop + 2) + 'px';
                    checkPowerUpCollision(powerup);
                }
            }, 16);
        }

        function checkBulletCollision(bullet) {
            const enemies = document.getElementsByClassName('enemy');
            for (let enemy of enemies) {
                const bulletRect = bullet.getBoundingClientRect();
                const enemyRect = enemy.getBoundingClientRect();
                
                if (bulletRect.top < enemyRect.bottom &&
                    bulletRect.bottom > enemyRect.top &&
                    bulletRect.left < enemyRect.right &&
                    bulletRect.right > enemyRect.left) {
                    
                    createExplosion(enemyRect.left + 15, enemyRect.top + 15);
                    enemy.remove();
                    bullet.remove();
                    score += 100;
                    scoreElement.textContent = score;
                    if (!isMuted) playHitSound();
                }
            }

            const bosses = document.querySelectorAll('.boss');
            bosses.forEach(boss => {
                const bossRect = boss.getBoundingClientRect();
                const bulletRect = bullet.getBoundingClientRect();
                
                if (bulletRect.top < bossRect.bottom &&
                    bulletRect.bottom > bossRect.top &&
                    bulletRect.left < bossRect.right &&
                    bulletRect.right > bossRect.left) {
                    
                    bullet.remove();
                    boss.dataset.health = parseInt(boss.dataset.health) - 1;

                    const healthBar = boss.querySelector('.boss-health');
                    healthBar.style.width = `${boss.dataset.health * 10}%`;

                    if (boss.dataset.health <= 0) {
                        createExplosion(bossRect.left + 50, bossRect.top + 50);
                        boss.remove();
                        score += 1000;
                        scoreElement.textContent = score;
                    }
                }
            });
        }

        function checkEnemyCollision(enemy) {
            const playerRect = player.getBoundingClientRect();
            const enemyRect = enemy.getBoundingClientRect();
            
            if (playerRect.top < enemyRect.bottom &&
                playerRect.bottom > enemyRect.top &&
                playerRect.left < enemyRect.right &&
                playerRect.right > enemyRect.left) {
                
                gameOver();
            }
        }

        function checkPowerUpCollision(powerup) {
            const playerRect = player.getBoundingClientRect();
            const powerupRect = powerup.getBoundingClientRect();
            
            if (playerRect.top < powerupRect.bottom &&
                playerRect.bottom > powerupRect.top &&
                playerRect.left < powerupRect.right &&
                playerRect.right > powerupRect.left) {
                
                powerup.remove();
                activatePowerUp();
            }
        }

        function activatePowerUp() {
            if (powerUpActive) return;
            powerUpActive = true;
            fireRate = 100;
            player.style.background = '#0ff';
            setTimeout(() => {
                fireRate = 200;
                player.style.background = '#00f';
                powerUpActive = false;
            }, 5000);
        }

        function createExplosion(x, y) {
            const explosion = document.createElement('div');
            explosion.className = 'explosion';
            explosion.style.left = x + 'px';
            explosion.style.top = y + 'px';
            gameContainer.appendChild(explosion);
            setTimeout(() => explosion.remove(), 500);
        }

        function playHitSound() {
            const context = new AudioContext();
            const oscillator = context.createOscillator();
            const gainNode = context.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(context.destination);
            
            oscillator.type = 'square';
            oscillator.frequency.setValueAtTime(440, context.currentTime);
            gainNode.gain.setValueAtTime(0.1, context.currentTime);
            
            oscillator.start();
            oscillator.stop(context.currentTime + 0.1);
        }

        function gameOver() {
            isGameActive = false;
            const gameOverScreen = document.createElement('div');
            gameOverScreen.style.position = 'fixed';
            gameOverScreen.style.top = '50%';
            gameOverScreen.style.left = '50%';
            gameOverScreen.style.transform = 'translate(-50%, -50%)';
            gameOverScreen.style.color = '#fff';
            gameOverScreen.style.fontSize = '48px';
            gameOverScreen.style.textAlign = 'center';
            gameOverScreen.innerHTML = `
                GAME OVER<br>
                <span style="font-size: 24px">Final Score: ${score}</span><br>
                <button onclick="location.reload()" style="margin-top: 20px; padding: 10px 20px; font-size: 20px">
                    Play Again
                </button>
            `;
            gameContainer.appendChild(gameOverScreen);
        }

        function spawnBoss() {
            const boss = document.createElement('div');
            boss.className = 'boss';
            boss.style.left = '50%';
            boss.style.top = '10%';
            boss.dataset.health = 10; // Boss heeft 10 levens
            gameContainer.appendChild(boss);

            // Boss health bar
            const healthBar = document.createElement('div');
            healthBar.className = 'boss-health-bar';
            const health = document.createElement('div');
            health.className = 'boss-health';
            health.style.width = '100%';
            healthBar.appendChild(health);
            boss.appendChild(healthBar);

            // Boss movement and shooting
            let bossDirection = 1;
            const bossInterval = setInterval(() => {
                if (!isGameActive) {
                    clearInterval(bossInterval);
                    return;
                }

                const bossLeft = parseFloat(boss.style.left);
                if (bossLeft <= 0 || bossLeft >= window.innerWidth - 100) {
                    bossDirection *= -1;
                }
                boss.style.left = (bossLeft + bossDirection * 5) + 'px';

                if (isGameActive) bossShoot(boss);
            }, 100);
        }

        function bossShoot(boss) {
            const bossBullet = document.createElement('div');
            bossBullet.className = 'bullet';
            bossBullet.style.background = '#f00';
            bossBullet.style.left = (parseFloat(boss.style.left) + 50) + 'px';
            bossBullet.style.top = (parseFloat(boss.style.top) + 100) + 'px';
            gameContainer.appendChild(bossBullet);

            // Boss bullet movement
            const bossBulletInterval = setInterval(() => {
                if (!isGameActive) {
                    clearInterval(bossBulletInterval);
                    return;
                }

                const currentTop = parseFloat(bossBullet.style.top);
                if (currentTop > window.innerHeight) {
                    bossBullet.remove();
                    clearInterval(bossBulletInterval);
                } else {
                    bossBullet.style.top = (currentTop + 10) + 'px';
                    checkBossBulletCollision(bossBullet);
                }
            }, 16);
        }

        function checkBossBulletCollision(bossBullet) {
            const playerRect = player.getBoundingClientRect();
            const bossBulletRect = bossBullet.getBoundingClientRect();
            
            if (playerRect.top < bossBulletRect.bottom &&
                playerRect.bottom > bossBulletRect.top &&
                playerRect.left < bossBulletRect.right &&
                playerRect.right > bossBulletRect.left) {
                
                bossBullet.remove();
                gameOver();
            }
        }

        // Start game
        update();
        setInterval(() => {
            if (isGameActive) score++;
            scoreElement.textContent = score;
        }, 1000);
    </script>
</body>
</html>